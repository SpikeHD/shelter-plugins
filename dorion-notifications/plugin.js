(()=>{var B=Object.create;var c=Object.defineProperty,C=Object.defineProperties,O=Object.getOwnPropertyDescriptor,G=Object.getOwnPropertyDescriptors,L=Object.getOwnPropertyNames,S=Object.getOwnPropertySymbols,M=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var h=(n,e,o)=>e in n?c(n,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[e]=o,u=(n,e)=>{for(var o in e||={})N.call(e,o)&&h(n,o,e[o]);if(S)for(var o of S(e))P.call(e,o)&&h(n,o,e[o]);return n},f=(n,e)=>C(n,G(e));var q=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),V=(n,e)=>{for(var o in e)c(n,o,{get:e[o],enumerable:!0})},I=(n,e,o,l)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of L(e))!N.call(n,t)&&t!==o&&c(n,t,{get:()=>e[t],enumerable:!(l=O(e,t))||l.enumerable});return n};var J=(n,e,o)=>(o=n!=null?B(M(n)):{},I(e||!n||!n.__esModule?c(o,"default",{value:n,enumerable:!0}):o,n)),j=n=>I(c({},"__esModule",{value:!0}),n);var i=(n,e,o)=>new Promise((l,t)=>{var R=s=>{try{w(o.next(s))}catch(_){t(_)}},D=s=>{try{w(o.throw(s))}catch(_){t(_)}},w=s=>s.done?l(s.value):Promise.resolve(s.value).then(R,D);w((o=o.apply(n,e)).next())});var E=q((Y,T)=>{T.exports=shelter.solidWeb});var Q={};V(Q,{onLoad:()=>$,onUnload:()=>K});var k=J(E(),1);var x={name:"Dorion",invoke:(n,e)=>{var o;return(o=window.__TAURI__)!=null&&o.invoke?window.__TAURI__.invoke(n,e):window.__TAURI__.core.invoke(n,e)},event:{emit:(n,e)=>window.__TAURI__.event.emit(n,e),listen:(n,e)=>i(void 0,null,function*(){return window.__TAURI__.event.listen(n,e)})},app:{getVersion:()=>window.__TAURI__.app.getVersion()},process:{relaunch:()=>window.__TAURI__.process.relaunch()},apiWindow:{appWindow:{setFullscreen:n=>{var e,o;return(o=(e=window.__TAURI__)==null?void 0:e.webviewWindow)!=null&&o.getCurrentWebviewWindow?window.__TAURI__.webviewWindow.getCurrentWebviewWindow().setFullscreen(n):window.__TAURI__.window.appWindow.setFullscreen(n)}}}};var A={name:"Flooed",invoke:(n,e)=>window.Flooed.invoke(n,e),event:{emit:()=>{},listen:()=>i(void 0,null,function*(){})},app:{getVersion:()=>window.Flooed.version},process:{relaunch:()=>window.Flooed.invoke("relaunch")},apiWindow:{appWindow:{setFullscreen:n=>window.Flooed.invoke("set_fullscreen",n)}}};var F={name:"Unknown",invoke:()=>i(void 0,null,function*(){}),event:{emit:()=>{},listen:()=>i(void 0,null,function*(){})},app:{getVersion:()=>"0.0.0"},process:{relaunch:()=>{}},apiWindow:{appWindow:{setFullscreen:()=>{}}}};var p="None";window.Dorion?p="Dorion":window.Flooed&&(p="Flooed");var a;switch(p){case"Dorion":a=x;break;case"Flooed":a=A;break;default:a=F;break}var g=window[p];var le=a.name,d=a.invoke,ce=a.event,de=a.app,pe=a.process,we=a.apiWindow;var{ui:{SwitchItem:U},flux:{dispatcher:v},solid:{createSignal:H}}=shelter,[r,b]=H(null),z='div[class*="contentColumn"] div[class*="container"]';r().desktop_notifications&&Notification.requestPermission();var m=!1,y=!1,W=n=>i(void 0,null,function*(){if(n.section!=="Notifications"){m=!1,y=!1;return}else if(m)return;m=!0,yield window.Dorion.util.waitForElm("#notifications-tab");let e=document.querySelector(z);e.style.display="none";let o=e.nextElementSibling;if(o&&(o.style.display="none"),y)return;let l=[(0,k.createComponent)(U,{note:"Shows a red badge on the app icon when you have unread messages.",get value(){var t;return(t=r())==null?void 0:t.unread_badge},onChange:t=>i(void 0,null,function*(){b(f(u({},r()),{unread_badge:t})),yield d("write_config_file",{contents:JSON.stringify(r())}),g.shouldShowUnreadBadge=t,t?g.util.applyNotificationCount():d("notif_count",{amount:0})}),children:"Enable Unread Message Badge"}),(0,k.createComponent)(U,{note:"If you're looking for per-channel or per-server notifications, right-click the desired server icon and select Notification Settings.",get value(){var t;return(t=r())==null?void 0:t.desktop_notifications},onChange:t=>i(void 0,null,function*(){b(f(u({},r()),{desktop_notifications:t})),v.dispatch({type:"NOTIFICATIONS_SET_PERMISSION_STATE",enabled:t?"ENABLED":"DISABLED"}),yield d("write_config_file",{contents:JSON.stringify(r())})}),children:"Enable Desktop Notifications"})];for(let t of l)e.parentElement.prepend(t);y=!0});v.subscribe("USER_SETTINGS_MODAL_SET_SECTION",W);var $=()=>i(void 0,null,function*(){b(JSON.parse(yield d("read_config_file")))}),K=()=>{v.unsubscribe("USER_SETTINGS_MODAL_SET_SECTION",W)};return j(Q);})();
