(()=>{var B=Object.create;var l=Object.defineProperty,C=Object.defineProperties,O=Object.getOwnPropertyDescriptor,G=Object.getOwnPropertyDescriptors,L=Object.getOwnPropertyNames,S=Object.getOwnPropertySymbols,M=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var h=(e,n,o)=>n in e?l(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,f=(e,n)=>{for(var o in n||={})N.call(n,o)&&h(e,o,n[o]);if(S)for(var o of S(n))P.call(n,o)&&h(e,o,n[o]);return e},u=(e,n)=>C(e,G(n));var q=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports),V=(e,n)=>{for(var o in n)l(e,o,{get:n[o],enumerable:!0})},I=(e,n,o,r)=>{if(n&&typeof n=="object"||typeof n=="function")for(let t of L(n))!N.call(e,t)&&t!==o&&l(e,t,{get:()=>n[t],enumerable:!(r=O(n,t))||r.enumerable});return e};var J=(e,n,o)=>(o=e!=null?B(M(e)):{},I(n||!e||!e.__esModule?l(o,"default",{value:e,enumerable:!0}):o,e)),j=e=>I(l({},"__esModule",{value:!0}),e);var i=(e,n,o)=>new Promise((r,t)=>{var R=s=>{try{w(o.next(s))}catch(_){t(_)}},D=s=>{try{w(o.throw(s))}catch(_){t(_)}},w=s=>s.done?r(s.value):Promise.resolve(s.value).then(R,D);w((o=o.apply(e,n)).next())});var E=q((Y,T)=>{T.exports=shelter.solidWeb});var Q={};V(Q,{onLoad:()=>$,onUnload:()=>K});var k=J(E(),1);var x={name:"Dorion",invoke:(e,n)=>{var o;return(o=window.__TAURI__)!=null&&o.invoke?window.__TAURI__.invoke(e,n):window.__TAURI__.core.invoke(e,n)},event:{emit:(e,n)=>window.__TAURI__.event.emit(e,n),listen:(e,n)=>i(void 0,null,function*(){return window.__TAURI__.event.listen(e,n)})},app:{getVersion:()=>window.__TAURI__.app.getVersion()},process:{relaunch:()=>window.__TAURI__.process.relaunch()},apiWindow:{appWindow:{setFullscreen:e=>{var n,o;return(o=(n=window.__TAURI__)==null?void 0:n.webviewWindow)!=null&&o.getCurrentWebviewWindow?window.__TAURI__.webviewWindow.getCurrentWebviewWindow().setFullscreen(e):window.__TAURI__.window.appWindow.setFullscreen(e)}}}};var A={name:"Flooed",invoke:(e,n)=>window.Flooed.invoke(e,n),event:{emit:()=>{},listen:()=>i(void 0,null,function*(){})},app:{getVersion:()=>window.Flooed.version},process:{relaunch:()=>window.Flooed.invoke("relaunch")},apiWindow:{appWindow:{setFullscreen:e=>window.Flooed.invoke("set_fullscreen",e)}}};var F={name:"Unknown",invoke:()=>i(void 0,null,function*(){}),event:{emit:()=>{},listen:()=>i(void 0,null,function*(){})},app:{getVersion:()=>"0.0.0"},process:{relaunch:()=>{}},apiWindow:{appWindow:{setFullscreen:()=>{}}}};var p="None";window.Dorion?p="Dorion":window.Flooed&&(p="Flooed");var a;switch(p){case"Dorion":a=x;break;case"Flooed":a=A;break;default:a=F;break}var g=window[p];var ce=a.name,d=a.invoke,le=a.event,de=a.app,pe=a.process,we=a.apiWindow;var{ui:{SwitchItem:U},flux:{dispatcher:v},solid:{createSignal:H}}=shelter,[c,b]=H(null),z='div[class*="contentColumn"] div[class*="container"]',m=!1,y=!1,W=e=>i(void 0,null,function*(){if(e.section!=="Notifications"){m=!1,y=!1;return}else if(m)return;m=!0,yield window.Dorion.util.waitForElm("#notifications-tab");let n=document.querySelector(z);n.style.display="none";let o=n.nextElementSibling;if(o&&(o.style.display="none"),y)return;let r=[(0,k.createComponent)(U,{note:"Shows a red badge on the app icon when you have unread messages.",get value(){var t;return(t=c())==null?void 0:t.unread_badge},onChange:t=>i(void 0,null,function*(){b(u(f({},c()),{unread_badge:t})),yield d("write_config_file",{contents:JSON.stringify(c())}),g.shouldShowUnreadBadge=t,t?g.util.applyNotificationCount():d("notif_count",{amount:0})}),children:"Enable Unread Message Badge"}),(0,k.createComponent)(U,{note:"If you're looking for per-channel or per-server notifications, right-click the desired server icon and select Notification Settings.",get value(){var t;return(t=c())==null?void 0:t.desktop_notifications},onChange:t=>i(void 0,null,function*(){b(u(f({},c()),{desktop_notifications:t})),v.dispatch({type:"NOTIFICATIONS_SET_PERMISSION_STATE",enabled:t?"ENABLED":"DISABLED"}),yield d("write_config_file",{contents:JSON.stringify(c())})}),children:"Enable Desktop Notifications"})];for(let t of r)n.parentElement.prepend(t);y=!0});v.subscribe("USER_SETTINGS_MODAL_SET_SECTION",W);var $=()=>i(void 0,null,function*(){let e=JSON.parse(yield d("read_config_file"));b(e),e.desktop_notifications&&Notification.requestPermission()}),K=()=>{v.unsubscribe("USER_SETTINGS_MODAL_SET_SECTION",W)};return j(Q);})();
