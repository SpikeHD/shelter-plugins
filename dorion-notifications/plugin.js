(()=>{var B=Object.create;var d=Object.defineProperty,G=Object.defineProperties,L=Object.getOwnPropertyDescriptor,P=Object.getOwnPropertyDescriptors,M=Object.getOwnPropertyNames,S=Object.getOwnPropertySymbols,V=Object.getPrototypeOf,I=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var h=(e,n,o)=>n in e?d(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,g=(e,n)=>{for(var o in n||={})I.call(n,o)&&h(e,o,n[o]);if(S)for(var o of S(n))J.call(n,o)&&h(e,o,n[o]);return e},b=(e,n)=>G(e,P(n));var j=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports),q=(e,n)=>{for(var o in n)d(e,o,{get:n[o],enumerable:!0})},T=(e,n,o,c)=>{if(n&&typeof n=="object"||typeof n=="function")for(let t of M(n))!I.call(e,t)&&t!==o&&d(e,t,{get:()=>n[t],enumerable:!(c=L(n,t))||c.enumerable});return e};var H=(e,n,o)=>(o=e!=null?B(V(e)):{},T(n||!e||!e.__esModule?d(o,"default",{value:e,enumerable:!0}):o,e)),z=e=>T(d({},"__esModule",{value:!0}),e);var i=(e,n,o)=>new Promise((c,t)=>{var O=a=>{try{u(o.next(a))}catch(f){t(f)}},D=a=>{try{u(o.throw(a))}catch(f){t(f)}},u=a=>a.done?c(a.value):Promise.resolve(a.value).then(O,D);u((o=o.apply(e,n)).next())});var E=j((te,A)=>{A.exports=shelter.solidWeb});var ne={};q(ne,{onLoad:()=>Z,onUnload:()=>ee});var v=H(E(),1);var x={name:"Dorion",invoke:(e,n)=>{var o;return(o=window.__TAURI__)!=null&&o.invoke?window.__TAURI__.invoke(e,n):window.__TAURI__.core.invoke(e,n)},event:{emit:(e,n)=>window.__TAURI__.event.emit(e,n),listen:(e,n)=>i(void 0,null,function*(){return window.__TAURI__.event.listen(e,n)})},app:{getVersion:()=>window.__TAURI__.app.getVersion()},process:{relaunch:()=>window.__TAURI__.process.relaunch()},apiWindow:{appWindow:{setFullscreen:e=>{var n,o;return(o=(n=window.__TAURI__)==null?void 0:n.webviewWindow)!=null&&o.getCurrentWebviewWindow?window.__TAURI__.webviewWindow.getCurrentWebviewWindow().setFullscreen(e):window.__TAURI__.window.appWindow.setFullscreen(e)}}}};var R={name:"Flooed",invoke:(e,n)=>window.Flooed.invoke(e,n),event:{emit:()=>{},listen:()=>i(void 0,null,function*(){})},app:{getVersion:()=>window.Flooed.version},process:{relaunch:()=>window.Flooed.invoke("relaunch")},apiWindow:{appWindow:{setFullscreen:e=>window.Flooed.invoke("set_fullscreen",e)}}};var C={name:"Unknown",invoke:()=>i(void 0,null,function*(){}),event:{emit:()=>{},listen:()=>i(void 0,null,function*(){})},app:{getVersion:()=>"0.0.0"},process:{relaunch:()=>{}},apiWindow:{appWindow:{setFullscreen:()=>{}}}};var _="None";window.Dorion?_="Dorion":window.Flooed&&(_="Flooed");var s;switch(_){case"Dorion":s=x;break;case"Flooed":s=R;break;default:s=C;break}var y=window[_];var _e=s.name,l=s.invoke,ue=s.event,fe=s.app,ge=s.process,be=s.apiWindow;var{ui:{SwitchItem:F},flux:{dispatcher:w},solid:{createSignal:$},observeDom:K,patcher:Q}=shelter,[r,N]=$(null),X='div[class*="contentColumn"] div[class*="container"]',Y=Q.instead("Notification",window,()=>{}),p=null,k=!1,m=!1,U=e=>i(void 0,null,function*(){if(e.section!=="Notifications"){k=!1,m=!1;return}else if(k)return;k=!0,p=K(X,n=>{p.now(),n.style.display="none";let o=n.nextElementSibling;if(o&&(o.style.display="none"),m)return;let c=[(0,v.createComponent)(F,{note:"Shows a red badge on the app icon when you have unread messages.",get value(){var t;return(t=r())==null?void 0:t.unread_badge},onChange:t=>i(void 0,null,function*(){N(b(g({},r()),{unread_badge:t})),yield l("write_config_file",{contents:JSON.stringify(r())}),y.shouldShowUnreadBadge=t,t?y.util.applyNotificationCount():l("notif_count",{amount:0})}),children:"Enable Unread Message Badge"}),(0,v.createComponent)(F,{note:"If you're looking for per-channel or per-server notifications, right-click the desired server icon and select Notification Settings.",get value(){var t;return(t=r())==null?void 0:t.desktop_notifications},onChange:t=>i(void 0,null,function*(){N(b(g({},r()),{desktop_notifications:t})),w.dispatch({type:"NOTIFICATIONS_SET_PERMISSION_STATE",enabled:t?"ENABLED":"DISABLED"}),yield l("write_config_file",{contents:JSON.stringify(r())})}),children:"Enable Desktop Notifications"})];for(let t of c)n.parentElement.prepend(t);m=!0})}),W=e=>{r().desktop_notifications&&l("send_notification",{title:e.title,body:e.body,icon:e.icon})};w.subscribe("USER_SETTINGS_MODAL_SET_SECTION",U);w.subscribe("RPC_NOTIFICATION_CREATE",W);var Z=()=>i(void 0,null,function*(){N(JSON.parse(yield l("read_config_file")))}),ee=()=>{p==null||p.now(),w.unsubscribe("USER_SETTINGS_MODAL_SET_SECTION",U),w.unsubscribe("RPC_NOTIFICATION_CREATE",W),Y()};return z(ne);})();
