(()=>{var T=Object.create;var i=Object.defineProperty;var _=Object.getOwnPropertyDescriptor;var b=Object.getOwnPropertyNames;var x=Object.getPrototypeOf,U=Object.prototype.hasOwnProperty;var k=(e,o)=>()=>(o||e((o={exports:{}}).exports,o),o.exports),D=(e,o)=>{for(var t in o)i(e,t,{get:o[t],enumerable:!0})},f=(e,o,t,n)=>{if(o&&typeof o=="object"||typeof o=="function")for(let a of b(o))!U.call(e,a)&&a!==t&&i(e,a,{get:()=>o[a],enumerable:!(n=_(o,a))||n.enumerable});return e};var M=(e,o,t)=>(t=e!=null?T(x(e)):{},f(o||!e||!e.__esModule?i(t,"default",{value:e,enumerable:!0}):t,e)),w=e=>f(i({},"__esModule",{value:!0}),e);var h=(e,o,t)=>new Promise((n,a)=>{var g=r=>{try{l(t.next(r))}catch(c){a(c)}},C=r=>{try{l(t.throw(r))}catch(c){a(c)}},l=r=>r.done?n(r.value):Promise.resolve(r.value).then(g,C);l((t=t.apply(e,o)).next())});var y=k((G,m)=>{m.exports=shelter.solidWeb});var B={};D(B,{onUnload:()=>$});var d=M(y(),1);var{ui:{openModal:u,ModalRoot:v,ModalHeader:A,ModalBody:N,ModalConfirmFooter:O}}=shelter,{invoke:s,process:R,event:S}=window.__TAURI__,p=e=>(0,d.createComponent)(v,{get children(){return[(0,d.createComponent)(A,{get close(){return e.onCancel},get children(){return e.header}}),(0,d.createComponent)(N,{get children(){return e.body}}),(0,d.createComponent)(O,{get onConfirm(){return e.onConfirm},get onCancel(){return e.onCancel},get confirmText(){return e.confirmText},get cancelText(){return e.cancelText},get type(){return e.type}})]}}),W=()=>h(void 0,null,function*(){console.log("[Updater] Checking for updates...");let e=JSON.parse(yield s("read_config_file")),o=yield s("update_check"),t=()=>{s("do_update",{toUpdate:o})};if(console.log(`[Updater] Dorion things to update: ${o}`),!(e.update_notify!==void 0&&!e.update_notify)){if(o.includes("dorion")){if(e.autoupdate){u(n=>p({header:"Dorion Update",body:"A Dorion update has been fetched, and Dorion will restart momentarily.",confirmText:"Got it!",type:"neutral",onConfirm:()=>t(),onCancel:n.close})),t();return}u(n=>p({header:"Updates Available!",body:"There are Dorion updates available. Would you like to apply them? This notification can be disabled in Dorion Settings",confirmText:"Yes please!",cancelText:"Nope!",type:"neutral",onConfirm:()=>t(),onCancel:n.close}))}S.once("update_complete",()=>{u(n=>p({header:"Update Complete!",body:"The update has been applied! Please restart to apply the changes.",confirmText:"Okay!",type:"neutral",onConfirm:()=>R.relaunch(),onCancel:n.close}))})}}),$=()=>{};W();return w(B);})();
