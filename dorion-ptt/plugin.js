(()=>{var b=Object.defineProperty;var E=Object.getOwnPropertyDescriptor;var D=Object.getOwnPropertyNames;var I=Object.prototype.hasOwnProperty;var N=(t,e)=>{for(var a in e)b(t,a,{get:e[a],enumerable:!0})},U=(t,e,a,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of D(e))!I.call(t,s)&&s!==a&&b(t,s,{get:()=>e[s],enumerable:!(n=E(e,s))||n.enumerable});return t};var R=t=>U(b({},"__esModule",{value:!0}),t);var o=(t,e,a)=>new Promise((n,s)=>{var p=i=>{try{d(a.next(i))}catch(k){s(k)}},A=i=>{try{d(a.throw(i))}catch(k){s(k)}},d=i=>i.done?n(i.value):Promise.resolve(i.value).then(p,A);d((a=a.apply(t,e)).next())});var P={};N(P,{onUnload:()=>M});var m=t=>{let e="";switch(t){case 8:e="Backspace";break;case 9:e="Tab";break;case 13:e="Enter";break;case 16:e="Shift";break;case 17:e="Control";break;case 18:e="Alt";break;case 20:e="CapsLock";break;case 27:e="Escape";break;case 32:e="Space";break;case 33:e="PageUp";break;case 34:e="PageDown";break;case 35:e="End";break;case 36:e="Home";break;case 37:e="Left";break;case 38:e="Up";break;case 39:e="Right";break;case 40:e="Down";break;case 45:e="Insert";break;case 46:e="Delete";break;default:e=String.fromCharCode(t);break}return e};var v={invoke:(t,e)=>window.__TAURI__.invoke(t,e),event:{emit:(t,e)=>window.__TAURI__.event.emit(t,e),listen:(t,e)=>o(void 0,null,function*(){return window.__TAURI__.event.listen(t,e)})},app:{getVersion:()=>window.__TAURI__.app.getVersion(),getName:()=>window.__TAURI__.app.getName()},process:{relaunch:()=>window.__TAURI__.process.relaunch()},apiWindow:{appWindow:{setFullscreen:t=>window.__TAURI__.window.appWindow.setFullscreen(t)}}};var y={invoke:()=>o(void 0,null,function*(){}),event:{emit:()=>{},listen:()=>o(void 0,null,function*(){})},app:{getVersion:()=>"0.0.0",getName:()=>"None"},process:{relaunch:()=>{}},apiWindow:{appWindow:{setFullscreen:()=>{}}}};var f={invoke:()=>o(void 0,null,function*(){}),event:{emit:()=>{},listen:()=>o(void 0,null,function*(){})},app:{getVersion:()=>"0.0.0",getName:()=>"None"},process:{relaunch:()=>{}},apiWindow:{appWindow:{setFullscreen:()=>{}}}};var u="Dorion";window.Flooed&&(u="Flooed");var r;switch(u){case"Dorion":r=v;break;case"Flooed":r=y;break;default:r=f;break}var Z=window[u];var _=r.invoke,h=r.event,$=r.app,ee=r.process,te=r.apiWindow;var{flux:{dispatcher:l,stores:{UserStore:g}},observeDom:c}=shelter,T=[],x=[],S=[],B='div[class*="pttToolsMessage_"]',C='div[class*="radioBar_"]',F='div[class*="layerContainer_"] div[class*="layer_"]',w=()=>S.forEach(t=>t()),H=t=>o(void 0,null,function*(){if(t.section!=="Voice & Video"){w();return}S.push(c(B,e=>{e.remove()}),c(F,e=>{if(e.id)return;e.innerHTML="";let a=c('div[class*="backdrop_"]',n=>{n.click(),a()})}),c(C,e=>{let a='div[class*="info_"] div[class*="text"]',n=e.querySelector(a);n.textContent.includes("(")&&(n.textContent=n.textContent.replace(/\(.+?\)/g,""))}))}),L=t=>o(void 0,null,function*(){let{mode:e,options:{shortcut:a}}=t,s=a.map(p=>p[1]).map(m);_("save_ptt_keys",{keys:s}),_("toggle_ptt",{state:e==="PUSH_TO_TALK"})}),W=t=>o(void 0,null,function*(){var n;let{state:e}=t.payload,a={type:"SPEAKING",context:"default",userId:(n=g==null?void 0:g.getCurrentUser())==null?void 0:n.id,speakingFlags:e?1:0};console.log("Toggle handler called with state: ",e),l.dispatch(a)});x.push(l.subscribe("USER_SETTINGS_MODAL_SET_SECTION",H),l.subscribe("LAYER_POP",w),l.subscribe("AUDIO_SET_MODE",L));h.listen("ptt_toggle",W).then(t=>T.push(t));var M=()=>{w(),T.forEach(t=>t()),x.forEach(t=>t())};return R(P);})();
