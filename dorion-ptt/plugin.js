(()=>{var u=Object.defineProperty;var D=Object.getOwnPropertyDescriptor;var E=Object.getOwnPropertyNames;var N=Object.prototype.hasOwnProperty;var U=(n,e)=>{for(var o in e)u(n,o,{get:e[o],enumerable:!0})},I=(n,e,o,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of E(e))!N.call(n,s)&&s!==o&&u(n,s,{get:()=>e[s],enumerable:!(a=D(e,s))||a.enumerable});return n};var R=n=>I(u({},"__esModule",{value:!0}),n);var t=(n,e,o)=>new Promise((a,s)=>{var d=i=>{try{k(o.next(i))}catch(b){s(b)}},A=i=>{try{k(o.throw(i))}catch(b){s(b)}},k=i=>i.done?a(i.value):Promise.resolve(i.value).then(d,A);k((o=o.apply(n,e)).next())});var P={};U(P,{onUnload:()=>M});var g=n=>{let e="";switch(n){case 8:e="Backspace";break;case 9:e="Tab";break;case 13:e="Enter";break;case 16:e="Shift";break;case 17:e="Control";break;case 18:e="Alt";break;case 20:e="CapsLock";break;case 27:e="Escape";break;case 32:e="Space";break;case 33:e="PageUp";break;case 34:e="PageDown";break;case 35:e="End";break;case 36:e="Home";break;case 37:e="Left";break;case 38:e="Up";break;case 39:e="Right";break;case 40:e="Down";break;case 45:e="Insert";break;case 46:e="Delete";break;default:e=String.fromCharCode(n);break}return e};var v={name:"Dorion",invoke:(n,e)=>window.__TAURI__.invoke(n,e),event:{emit:(n,e)=>window.__TAURI__.event.emit(n,e),listen:(n,e)=>t(void 0,null,function*(){return window.__TAURI__.event.listen(n,e)})},app:{getVersion:()=>window.__TAURI__.app.getVersion(),getName:()=>window.__TAURI__.app.getName()},process:{relaunch:()=>window.__TAURI__.process.relaunch()},apiWindow:{appWindow:{setFullscreen:n=>window.__TAURI__.window.appWindow.setFullscreen(n)}}};var y={name:"Flooed",invoke:()=>t(void 0,null,function*(){}),event:{emit:()=>{},listen:()=>t(void 0,null,function*(){})},app:{getVersion:()=>"0.0.0",getName:()=>"None"},process:{relaunch:()=>{}},apiWindow:{appWindow:{setFullscreen:()=>{}}}};var f={name:"Unknown",invoke:()=>t(void 0,null,function*(){}),event:{emit:()=>{},listen:()=>t(void 0,null,function*(){})},app:{getVersion:()=>"0.0.0",getName:()=>"None"},process:{relaunch:()=>{}},apiWindow:{appWindow:{setFullscreen:()=>{}}}};var c="None";window.Dorion?c="Dorion":window.Flooed&&(c="Flooed");var r;switch(c){case"Dorion":r=v;break;case"Flooed":r=y;break;default:r=f;break}var Z=window[c];var $=r.name,_=r.invoke,h=r.event,ee=r.app,ne=r.process,oe=r.apiWindow;var{flux:{dispatcher:p,stores:{UserStore:m}},observeDom:l}=shelter,x=[],T=[],S=[],B='div[class*="pttToolsMessage_"]',C='div[class*="radioBar_"]',F='div[class*="layerContainer_"] div[class*="layer_"]',w=()=>S.forEach(n=>n()),H=n=>t(void 0,null,function*(){if(n.section!=="Voice & Video"){w();return}S.push(l(B,e=>{e.remove()}),l(F,e=>{if(e.id)return;e.innerHTML="";let o=l('div[class*="backdrop_"]',a=>{a.click(),o()})}),l(C,e=>{let o='div[class*="info_"] div[class*="text"]',a=e.querySelector(o);a.textContent.includes("(")&&(a.textContent=a.textContent.replace(/\(.+?\)/g,""))}))}),L=n=>t(void 0,null,function*(){let{mode:e,options:{shortcut:o}}=n,s=o.map(d=>d[1]).map(g);_("save_ptt_keys",{keys:s}),_("toggle_ptt",{state:e==="PUSH_TO_TALK"})}),W=n=>t(void 0,null,function*(){var a;let{state:e}=n.payload,o={type:"SPEAKING",context:"default",userId:(a=m==null?void 0:m.getCurrentUser())==null?void 0:a.id,speakingFlags:e?1:0};console.log("Toggle handler called with state: ",e),p.dispatch(o)});T.push(p.subscribe("USER_SETTINGS_MODAL_SET_SECTION",H),p.subscribe("LAYER_POP",w),p.subscribe("AUDIO_SET_MODE",L));h.listen("ptt_toggle",W).then(n=>x.push(n));var M=()=>{w(),x.forEach(n=>n()),T.forEach(n=>n())};return R(P);})();
