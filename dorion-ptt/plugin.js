(()=>{var _=Object.defineProperty;var D=Object.getOwnPropertyDescriptor;var U=Object.getOwnPropertyNames;var B=Object.prototype.hasOwnProperty;var E=(e,o)=>{for(var n in o)_(e,n,{get:o[n],enumerable:!0})},L=(e,o,n,t)=>{if(o&&typeof o=="object"||typeof o=="function")for(let r of U(o))!B.call(e,r)&&r!==n&&_(e,r,{get:()=>o[r],enumerable:!(t=D(o,r))||t.enumerable});return e};var N=e=>L(_({},"__esModule",{value:!0}),e);var a=(e,o,n)=>new Promise((t,r)=>{var c=s=>{try{m(n.next(s))}catch(f){r(f)}},C=s=>{try{m(n.throw(s))}catch(f){r(f)}},m=s=>s.done?t(s.value):Promise.resolve(s.value).then(c,C);m((n=n.apply(e,o)).next())});var K={};E(K,{onUnload:()=>P});var d={112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",27:"Escape",32:"Space",17:"Control",16:"Shift",18:"Alt",91:"Meta",13:"Enter",38:"Up",40:"Down",37:"Left",39:"Right",8:"Backspace",20:"CapsLock",9:"Tab",36:"Home",35:"End",33:"PageUp",34:"PageDown",45:"Insert",46:"Delete",109:"NumpadSubtract",107:"NumpadAdd",111:"NumpadDivide",106:"NumpadMultiply",192:"Grave",189:"Minus",187:"Equal",219:"LeftBracket",221:"RightBracket",220:"BackSlash",186:"Semicolon",222:"Apostrophe",188:"Comma",190:"Dot",191:"Slash"},w=e=>{let o="";return e>=65&&e<=90&&(o=String.fromCharCode(e)),e>=97&&e<=122&&(o=String.fromCharCode(e-32)),e>=48&&e<=57&&(o=String.fromCharCode(e)),d[e]&&(o=d[e]),o};function v(e){let o="Key";return e.length===1?e>="a"&&e<="z"?o+e.toUpperCase():"Digit"+e:d[e]?d[e]:o+e}var h={name:"Dorion",invoke:(e,o)=>window.__TAURI__.invoke(e,o),event:{emit:(e,o)=>window.__TAURI__.event.emit(e,o),listen:(e,o)=>a(void 0,null,function*(){return window.__TAURI__.event.listen(e,o)})},app:{getVersion:()=>window.__TAURI__.app.getVersion()},process:{relaunch:()=>window.__TAURI__.process.relaunch()},apiWindow:{appWindow:{setFullscreen:e=>window.__TAURI__.window.appWindow.setFullscreen(e)}}};var y={name:"Flooed",invoke:(e,o)=>window.Flooed.invoke(e,o),event:{emit:()=>{},listen:()=>a(void 0,null,function*(){})},app:{getVersion:()=>window.Flooed.version},process:{relaunch:()=>window.Flooed.invoke("relaunch")},apiWindow:{appWindow:{setFullscreen:e=>window.Flooed.invoke("set_fullscreen",e)}}};var T={name:"Unknown",invoke:()=>a(void 0,null,function*(){}),event:{emit:()=>{},listen:()=>a(void 0,null,function*(){})},app:{getVersion:()=>"0.0.0"},process:{relaunch:()=>{}},apiWindow:{appWindow:{setFullscreen:()=>{}}}};var p="None";window.Dorion?p="Dorion":window.Flooed&&(p="Flooed");var i;switch(p){case"Dorion":i=h;break;case"Flooed":i=y;break;default:i=T;break}var ee=window[p];var oe=i.name,F=i.invoke,b=i.event,ne=i.app,te=i.process,re=i.apiWindow;var{flux:{dispatcher:g,stores:{MediaEngineStore:l}},observeDom:u}=shelter,R=[],S=[],A=[],I='div[class*="pttToolsMessage_"]',H='div[class*="radioBar_"]',O='div[class*="layerContainer_"] div[class*="layer_"]',k=()=>A.forEach(e=>e()),W=e=>a(void 0,null,function*(){if(e.section!=="Voice & Video"){k();return}A.push(u(I,o=>{o.remove()}),u(O,o=>{if(o.id)return;o.innerHTML="";let n=u('div[class*="backdrop_"]',t=>{t.click(),n()})}),u(H,o=>{let n='div[class*="info_"] div[class*="text"]',t=o.querySelector(n);t.textContent.includes("(")&&(t.textContent=t.textContent.replace(/\(.+?\)/g,""))}))}),M=e=>a(void 0,null,function*(){let{mode:o,options:{shortcut:n}}=e,r=n.map(c=>c[1]).map(c=>({code:v(w(c)),name:v(w(c))}));F("set_keybind",{action:"PUSH_TO_TALK",keys:r}),b.emit("ptt_toggled",{state:o==="PUSH_TO_TALK"})}),x;b.emit("ptt_toggled",{state:((x=l==null?void 0:l.getMode)==null?void 0:x.call(l))==="PUSH_TO_TALK"});S.push(g.subscribe("USER_SETTINGS_MODAL_SET_SECTION",W),g.subscribe("LAYER_POP",k),g.subscribe("AUDIO_SET_MODE",M));var P=()=>{k(),R.forEach(e=>e()),S.forEach(e=>e())};return N(K);})();
