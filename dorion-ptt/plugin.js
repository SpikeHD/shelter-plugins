(()=>{var f=Object.defineProperty;var D=Object.getOwnPropertyDescriptor;var U=Object.getOwnPropertyNames;var E=Object.prototype.hasOwnProperty;var B=(e,o)=>{for(var n in o)f(e,n,{get:o[n],enumerable:!0})},L=(e,o,n,t)=>{if(o&&typeof o=="object"||typeof o=="function")for(let r of U(o))!E.call(e,r)&&r!==n&&f(e,r,{get:()=>o[r],enumerable:!(t=D(o,r))||t.enumerable});return e};var N=e=>L(f({},"__esModule",{value:!0}),e);var a=(e,o,n)=>new Promise((t,r)=>{var c=i=>{try{u(n.next(i))}catch(m){r(m)}},A=i=>{try{u(n.throw(i))}catch(m){r(m)}},u=i=>i.done?t(i.value):Promise.resolve(i.value).then(c,A);u((n=n.apply(e,o)).next())});var P={};B(P,{onUnload:()=>M});var _={112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",27:"Escape",32:"Space",17:"Control",16:"Shift",18:"Alt",91:"Meta",13:"Enter",38:"Up",40:"Down",37:"Left",39:"Right",8:"Backspace",20:"CapsLock",9:"Tab",36:"Home",35:"End",33:"PageUp",34:"PageDown",45:"Insert",46:"Delete",109:"NumpadSubtract",107:"NumpadAdd",111:"NumpadDivide",106:"NumpadMultiply",192:"Grave",189:"Minus",187:"Equal",219:"LeftBracket",221:"RightBracket",220:"BackSlash",186:"Semicolon",222:"Apostrophe",188:"Comma",190:"Dot",191:"Slash"},w=e=>{let o="";return e>=65&&e<=90&&(o=String.fromCharCode(e)),e>=97&&e<=122&&(o=String.fromCharCode(e-32)),e>=48&&e<=57&&(o=String.fromCharCode(e)),_[e]&&(o=_[e]),o};function k(e){if(e.length===1)return e.toLowerCase()>="a"&&e.toLowerCase()<="z"?"Key"+e.toUpperCase():"Digit"+e;let o="";return Object.values(_).forEach(n=>{console.log("comparing",e,n),e.includes(n)&&(console.log("found!"),o=n)}),console.log(o),o||"Key"+e}var h={name:"Dorion",invoke:(e,o)=>window.__TAURI__.invoke(e,o),event:{emit:(e,o)=>window.__TAURI__.event.emit(e,o),listen:(e,o)=>a(void 0,null,function*(){return window.__TAURI__.event.listen(e,o)})},app:{getVersion:()=>window.__TAURI__.app.getVersion()},process:{relaunch:()=>window.__TAURI__.process.relaunch()},apiWindow:{appWindow:{setFullscreen:e=>window.__TAURI__.window.appWindow.setFullscreen(e)}}};var y={name:"Flooed",invoke:(e,o)=>window.Flooed.invoke(e,o),event:{emit:()=>{},listen:()=>a(void 0,null,function*(){})},app:{getVersion:()=>window.Flooed.version},process:{relaunch:()=>window.Flooed.invoke("relaunch")},apiWindow:{appWindow:{setFullscreen:e=>window.Flooed.invoke("set_fullscreen",e)}}};var T={name:"Unknown",invoke:()=>a(void 0,null,function*(){}),event:{emit:()=>{},listen:()=>a(void 0,null,function*(){})},app:{getVersion:()=>"0.0.0"},process:{relaunch:()=>{}},apiWindow:{appWindow:{setFullscreen:()=>{}}}};var d="None";window.Dorion?d="Dorion":window.Flooed&&(d="Flooed");var s;switch(d){case"Dorion":s=h;break;case"Flooed":s=y;break;default:s=T;break}var ee=window[d];var oe=s.name,F=s.invoke,v=s.event,ne=s.app,te=s.process,re=s.apiWindow;var{flux:{dispatcher:g,stores:{MediaEngineStore:l}},observeDom:p}=shelter,R=[],S=[],C=[],I='div[class*="pttToolsMessage_"]',H='div[class*="radioBar_"]',O='div[class*="layerContainer_"] div[class*="layer_"]',b=()=>C.forEach(e=>e()),W=e=>a(void 0,null,function*(){if(e.section!=="Voice & Video"){b();return}C.push(p(I,o=>{o.remove()}),p(O,o=>{if(o.id)return;o.innerHTML="";let n=p('div[class*="backdrop_"]',t=>{t.click(),n()})}),p(H,o=>{let n='div[class*="info_"] div[class*="text"]',t=o.querySelector(n);t.textContent.includes("(")&&(t.textContent=t.textContent.replace(/\(.+?\)/g,""))}))}),K=e=>a(void 0,null,function*(){let{mode:o,options:{shortcut:n}}=e,r=n.map(c=>c[1]).map(c=>({code:k(w(c)),name:w(c)}));F("set_keybind",{action:"PUSH_TO_TALK",keys:r}),v.emit("ptt_toggled",{state:o==="PUSH_TO_TALK"})}),x;v.emit("ptt_toggled",{state:((x=l==null?void 0:l.getMode)==null?void 0:x.call(l))==="PUSH_TO_TALK"});S.push(g.subscribe("USER_SETTINGS_MODAL_SET_SECTION",W),g.subscribe("LAYER_POP",b),g.subscribe("AUDIO_SET_MODE",K));var M=()=>{b(),R.forEach(e=>e()),S.forEach(e=>e())};return N(P);})();
